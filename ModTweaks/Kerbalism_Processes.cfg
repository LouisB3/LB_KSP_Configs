@PART[kerbalism-lifesupportmodule]:AFTER[ReStock]
{
	!mesh = 0
	MODEL
	{
		model = ReStock/Assets/Resource/restock-isru-125-1
		scale = 0.28, 0.28, 0.28
	}
	%rescaleFactor = 1
	@node_stack_top = 0.0, 0.2632, 0.0, 0.0, 1.0, 0.0, 0
	@node_stack_bottom = 0.0, -0.2632, 0.0, 0.0, -1.0, 0.0, 0
	@node_attach  = -0.154, -0.2632, 0.0, -1.0, 0.0, 0.0, 0
	MODULE
	{
		name = ModuleRestockISRUAnimation
		deployAnimationName = heater
		needsEC = false
	}
	@bulkheadProfiles = size0
}

@PART[kerbalism-chemicalplant]:AFTER[ReStock]
{
	!mesh = 0
	MODEL
	{
		model = ReStock/Assets/Resource/restock-isru-25-1
		scale = 0.14, 0.168, 0.14
	}
	%rescaleFactor = 1
	@node_stack_top = 0.0, 0.2632, 0.0, 0.0, 1.0, 0.0, 0
	@node_stack_bottom = 0.0, -0.2632, 0.0, 0.0, -1.0, 0.0, 0
	@node_attach  = -0.154, -0.2632, 0.0, -1.0, 0.0, 0.0, 0
	MODULE
	{
		name = ModuleRestockISRUAnimation
		deployAnimationName = heater
		needsEC = false
	}
	@bulkheadProfiles = size0
}

Profile //[KerbalismSupport]:NEEDS[RationalResources,Kerbalism,RationalResourcesKerbalism,!KerbalismCompatibilityOverhaul]
{
	name = KerbalismSupport
	mod name = Rational Resources Kerbalism
	moddir = RationalResourcesKerbalism
	Process //from KCO
	{
    		name = methane sabatier process
    		title = Sabatier process (LCH4)
    		modifier = _SabatierLCH4
    		input = ElectricCharge@0.008082126
    		input = CarbonDioxide@3.490273221
    		input = Hydrogen@13.87826691
    		output = Water@0.005574954
    		output = LqdMethane@0.002068521    
    		dump_valve = Water,LqdMethane
	}
	Process //adapted from CryoTanks patch hydrogen liquefaction
	{
    		name = oxidizer liquefaction
    		title = Oxidizer Liquefaction
    		modifier = _OxLiquefaction
    		//input = ElectricCharge@0.008082126 //ratio TBD 
    		input = Oxygen@2.1516531915
    		output = Oxidizer@0.0006067662 //same as anthraquinone process  
	}
}

@PART:HAS[#RRConverter[isSet]]:NEEDS[RationalResources,Kerbalism,RationalResourcesKerbalism,!KerbalismCompatibilityOverhaul]:AFTER[RationalResourcesKerbalism]
{
	MODULE
	{
		name = ProcessController
		resource = _SabatierLCH4
		title = Sabatier process (LCH4)
		capacity = 90
		valve_i = 2
		@capacity *= #$/RRPower$
	}
	MODULE
	{
		name = ProcessController
		resource = _OxLiquefaction
		title = Oxidizer liquefaction
		capacity = 90
		@capacity *= #$/RRPower$
	}
	@MODULE[Configure]
	{
		SETUP
		{
			name = Sabatier Process (LCH4)
			desc = <b>Hydrogen</b> and <b>CarbonDioxide</b> react with a nickel catalyst to produce <b>Water</b> and <b>LqdMethane</b>.
			MODULE
			{
				type = ProcessController
				id_field = resource
				id_value = _SabatierLCH4
			}
		}
	}
	@MODULE[Configure]
	{
		SETUP
		{
			name = Oxidizer Liquefaction
			desc = Liquefy <b>Oxygen</b> gas into <b>Oxidizer</b>.
			tech = advScienceTech
			MODULE
			{
				type = ProcessController
				id_field = resource
				id_value = _OxLiquefaction
			}
		}
	}
}

RESOURCE_DEFINITION:NEEDS[RationalResources,Kerbalism,RationalResourcesKerbalism,!KerbalismCompatibilityOverhaul]
{
  name = _SabatierLCH4
  density = 0.0
  isVisible = false
}

RESOURCE_DEFINITION:NEEDS[RationalResources,Kerbalism,RationalResourcesKerbalism,!KerbalismCompatibilityOverhaul]
{
  name = _OxLiquefaction
  density = 0.0
  isVisible = false
}